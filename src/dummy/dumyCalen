import React from 'react'
import { View } from 'react-native'
import { Text, Content, Container, List, ListItem, Icon, H1, H3, Button, Header, Left, Body, Right } from 'native-base'
import headStyle from '../styles/HeaderSetting'
import { CalendarList } from 'react-native-calendars'
import { widthPercentageToDP } from 'react-native-responsive-screen'

export default class Availability extends React.Component{
    constructor(props){
        super(props)
        this.state = {
            currenDate: '',
            selectedDate:[{}]
        }
    }

    goBack = () =>{
        this.props.navigation.goBack()
    }

    clearData = () =>{
        this.setState({
            selectedDate:[]
        })
    }

    updateDate = (day) =>{
        let marked = true
        if(this.state.selectedDate.length === undefined){
            if(this.state.selectedDate[day.dateString]){
                } else {
                const updateDates = {...this.state.selectedDate, ...{ [day.dateString]: {selected: true, endingDay: true, color: 'green', textColor: 'black'}
                        }
                    }
                    this.setState({
                        selectedDate: updateDates
                    })
                }
        } else {
            const updateDates = { [day.dateString]: {startingDay: true, color: 'green'} }
                this.setState({
                    selectedDate: updateDates
                })
        }
    }

    render(){
        return(
            <Container>
                <View style={{marginTop:25}}>
                    <Header transparent >
                        <Left>
                            <Icon type="AntDesign" onPress={() => this.goBack()} style={{color:'black'}} name="arrowleft" />
                        </Left>
                        <Body />
                        <Right>
                            <Text onPress={this.clearData}>Clear</Text>
                        </Right>
                    </Header>
                    <View style={{marginTop:'5%', marginLeft:12.5}}>
                        <H1>Select dates</H1>
                        <Text note style={{marginTop:10}}>Add your travel dates for exact pricing.</Text>
                    </View>
                    <View style={{width:widthPercentageToDP('100%')}}>
                        <CalendarList
                            pastScrollRange={50}
                            futureScrollRange={50}
                            scrollEnabled={true}
                            minDate={new Date()}
                            onDayPress={this.updateDate}
                            markedDates={this.state.selectedDate}
                            markingType={'period'}
                            showScrollIndicator={true}
                            theme={{
                                backgroundColor: '#ffffff',
                                calendarBackground: '#ffffff',
                                textSectionTitleColor: '#b6c1cd',
                                textSectionTitleDisabledColor: '#d9e1e8',
                                todayTextColor: '#00adf5',
                                dayTextColor: '#2d4150',
                                selectedDayBackgroundColor: '#00adf5',
                                textDisabledColor: '#d9e1e8',
                                dotColor: '#00adf5',
                                selectedDotColor: '#ffffff',
                                arrowColor: 'orange',
                                disabledArrowColor: '#d9e1e8',
                                monthTextColor: 'blue',
                                indicatorColor: 'blue',
                                textDayFontWeight: '300',
                                textMonthFontWeight: 'bold',
                                textDayHeaderFontWeight: '300',
                                textDayFontSize: 16,
                                textMonthFontSize: 16,
                                textDayHeaderFontSize: 16
                            }}
                        />
                    </View>
                </View>
            </Container>
        )       
    }
}